{% extends 'base.html' %}

{% block title %}Home{% endblock %}

{% block content %}

<header class="hero">
<div class="hero-grid">

    <!-- Left  -->
    <div class="hero-text">
        <span class="badge">The Blog Engine</span>
        <h1>
            BlogHaven<br>
            <span class="gradient-text">Write what matters</span>
        </h1>
        <p> A minimal blog platform for people who enjoy writing, reading,
    and thoughtful discussions</p>
    </div>

    <!-- Right -->
    <div class="carousel-container">

        <div class="genre-card card-front">
            <h3>Technology</h3>
            <p>Latest in tech</p>
            <span class="emoji">‚öôÔ∏è</span>
        </div>

        <div class="genre-card card-back-right">
            <h3>Adventure</h3>
            <p>Travel & exploration</p>
            <span class="emoji">‚õ∞Ô∏è</span>
        </div>

        <div class="genre-card card-back-left">
            <h3>Food</h3>
            <p>Recipes & reviews</p>
            <span class="emoji">üç¥</span>
        </div>
    </div>
</div>
</header>


<main class="container">
    <h2 class="section-title">Trending Now</h2>

    <div class="post-grid">
        {% for post in posts %}
        <article class="post-card">
            <div class="post-body">

                <div class="post-meta">
                    {% for genre in post.genres.all %}
                        <span class="tag">{{ genre.name }}</span>
                    {% endfor %}
                </div>

                <h3>
                    <a href="{% url 'post_detail' post.slug %}">
                        {{ post.title }}
                    </a>
                </h3>

                <p>{{ post.content|truncatechars:120 }}</p>

                <div class="post-footer">
                    <span class="author">{{ post.author.username }}</span>

                    {% if user.is_authenticated %}
                        <form method="POST"
                              action="{% url 'like_post' post.slug %}"
                              class="like-form"
                              onclick="event.stopPropagation();">
                            {% csrf_token %}
                            <button type="submit" class="like-btn">
                                {% if user in post.likes.all %}
                                    <i class="fa-solid fa-heart liked"></i>
                                {% else %}
                                    <i class="fa-regular fa-heart"></i>
                                {% endif %}
                                <span>{{ post.likes.count }}</span>
                            </button>
                        </form>
                    {% else %}
                        <span class="likes">
                            <i class="fa-regular fa-heart"></i>
                            {{ post.likes.count }}
                        </span>
                    {% endif %}
                </div>

            </div>
        </article>
        {% empty %}
            <p>No posts available.</p>
        {% endfor %}
    </div>
</main>


{% endblock %}
